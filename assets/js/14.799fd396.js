(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{577:function(s,t,a){"use strict";a.r(t);var n=a(16),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("æœ¬ç¯‡é‡ç‚¹å…³æ³¨ä»¥ä¸‹ 2 ç‚¹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("skipList çš„å®ç°")]),s._v(" "),a("li",[s._v("redis ä¸­å¯¹äº skipList çš„æ‰©å±•")])])]),s._v(" "),a("p",[s._v("âš ï¸ æœ¬ç¯‡å±äºçº¯çº¯çš„æ•°æ®ç»“æ„ï¼Œå¦‚æœä½ å¯¹æ•°æ®ç»“æ„æ„Ÿåˆ°ææƒ§å¯ä»¥è·³è¿‡æœ¬ç¯‡ï¼Œç›´æ¥ä½¿ç”¨ GitHub ä¸Šçš„ä»£ç ï¼Œä¸ä¼šå¯¹åç»­çš„å­¦ä¹ äº§ç”Ÿå½±å“ã€‚"),a("em",[s._v("ä¸è¿‡æˆ‘è¿˜æ˜¯å»ºè®®ä½ ç›´é¢ææƒ§ ğŸ˜ƒ")]),s._v("ã€‚")]),s._v(" "),a("h2",{attrs:{id:"ğŸ‘¨â€ğŸ«-skiplist-ä»‹ç»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‘¨â€ğŸ«-skiplist-ä»‹ç»"}},[s._v("#")]),s._v(" ğŸ‘¨â€ğŸ« skiplist ä»‹ç»")]),s._v(" "),a("p",[s._v("redis ä¸­ sortedset çš„åº•å±‚æ•°æ®ç»“æ„å°±æ˜¯ä½¿ç”¨ skiplistï¼Œæ‰€ä»¥åœ¨å®ç° sortedset ç›¸å…³å‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£å¹¶ä¸”å®ç° skiplistã€‚")]),s._v(" "),a("p",[s._v("skiplist çš„ç›®çš„æ˜¯ä¸ºäº†å¿«é€ŸæŸ¥æ‰¾ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªã€Œæœ‰åºé“¾è¡¨ã€ï¼Œä½†æ˜¯ä¸ºäº†æ›´å¿«çš„æŸ¥æ‰¾ï¼Œåœ¨æœ‰åºé“¾è¡¨ä¸Šåšäº†ä¸€äº›æ”¹è¿›ã€‚ä¸‹é¢ç”¨å‡ å¼ å›¾ç¤ºæ¥å±•ç¤º skiplist å·¥ä½œåŸç†ã€‚")]),s._v(" "),a("p",[s._v("å¯¹äºä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼šæŸ¥æ‰¾æ•ˆç‡æ˜¯ "),a("code",[s._v("O(n)")]),s._v("ï¼ŒåŒæ ·å¯¹æœ‰åºé“¾è¡¨çš„å¢åˆ æ”¹éƒ½è¦å…ˆè¿›è¡ŒæŸ¥æ‰¾ï¼Œæ‰€ä»¥å¢åˆ æ”¹çš„æ•ˆç‡ä¹Ÿæ˜¯ "),a("code",[s._v("O(n)")]),s._v("ã€‚è¿™ä¸ªæ•ˆç‡æ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œå®ƒçš„å¥½å¤„åœ¨äºå…ƒç´ å·²ç»æœ‰åºï¼Œè¿™æ ·å¯¹ "),a("code",[s._v("zrank")]),s._v(" ä¹‹ç±»çš„å‘½ä»¤ç›´æ¥é¡ºåºè¯»å–é“¾è¡¨æ•°æ®å°±è¡Œã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220402093329.png",alt:""}})]),s._v(" "),a("p",[s._v("åœ¨ä»£ç ä¸­ï¼Œé€šå¸¸ä¼šè¿™ä¹ˆè®¾è®¡æœ‰åºé“¾è¡¨")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Node "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Element     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¿å­˜å…ƒç´ ")]),s._v("\n    backward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å‰ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n    forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¸‹ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("å¦‚æœï¼Œæˆ‘ä»¬è¦æé«˜æœ‰åºé“¾è¡¨çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œ"),a("strong",[s._v("å¯ä»¥å–é—´éš”èŠ‚ç‚¹ï¼Œå¯¹èŠ‚ç‚¹æ–°å¢ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹")]),s._v("ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220402103927.png",alt:""}})]),s._v(" "),a("p",[s._v("è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸€äº›èŠ‚ç‚¹ï¼ˆæ¯”å¦‚èŠ‚ç‚¹ 3ï¼‰ä¼šæœ‰å¤šä¸ª forward æŒ‡é’ˆï¼Œæ‰€ä»¥ Node çš„ç»“æ„ä½“å˜æˆä¸‹é¢è¿™æ ·ï¼š")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Node "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Element\n    forwards   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  å¤šä¸ªä¸‹ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n    backward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  æœ€åº•å±‚çš„å‰ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("è¿™æ ·æœ‰åºé“¾è¡¨å°±è¿›åŒ–äº†ï¼Œç°åœ¨å‡è®¾æˆ‘ä»¬è¦æŸ¥æ‰¾ 19ï¼ŒæŸ¥æ‰¾æ€è·¯å¦‚ä¸‹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("ä» 3 çš„ä¸¤ä¸ª forward æŒ‡é’ˆéå†ï¼Œç¬¬ä¸€ä¸ª foward æŒ‡å‘çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„å€¼ä¸º 12ï¼Œ12 < 19ï¼Œé‚£ä¹ˆ 12 ä¹‹å‰çš„èŠ‚ç‚¹éƒ½å°±ä¸ç”¨éå†äº†ã€‚åœ¨ä¸Šé¢çš„å›¾ç¤ºä¸­ï¼ŒèŠ‚ç‚¹ 8 åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­å°±è¢«è·³è¿‡äº†ï¼Œè¿™ä¹Ÿæ˜¯ skiplist åå­—çš„ç”±æ¥ã€‚")]),s._v(" "),a("li",[s._v("åŒæ ·ï¼Œéå† 12 çš„ä¸¤ä¸ª forward æŒ‡é’ˆï¼Œç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ä¸º 23ï¼Œ23 > 19ï¼Œé‚£ä¹ˆæ¥ç€æŸ¥çœ‹ç¬¬äºŒä¸ª forward æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆæŒ‡å‘ 19ï¼Œå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„å…ƒç´ ã€‚")])]),s._v(" "),a("p",[s._v("å’Œæœ‰åºåˆ—è¡¨å¯¹æ¯”æŸ¥æ‰¾æ•ˆç‡ï¼Œæœ‰åºåˆ—è¡¨éœ€è¦éå† "),a("code",[s._v("3-8-12-19")]),s._v("ï¼Œè€Œç°åœ¨åªè¦éå† "),a("code",[s._v("3-12-19")]),s._v("ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤Ÿé•¿ï¼Œé‚£ä¹ˆæ•ˆç‡æé«˜ä¼šæ›´æ˜æ˜¾ã€‚")]),s._v(" "),a("p",[s._v("è¿™ç§å½¢æ€è·ç¦»çœŸæ­£çš„ skiplist å·²ç»å¾ˆæ¥è¿‘äº†ï¼ŒçœŸæ­£çš„ skiplist å¯¹äºå“ªäº›èŠ‚ç‚¹è¦å¢åŠ æŒ‡é’ˆæ˜¯éšæœºçš„ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424112630.png",alt:""}})]),s._v(" "),a("p",[s._v("ä¸Šé¢çš„å›¾ç¤ºå°±æ˜¯ä¸€ä¸ª skiplistï¼Œå¯¹äºå“ªä¸ªèŠ‚ç‚¹éœ€è¦å¢åŠ æŒ‡é’ˆï¼Œå¢åŠ å¤šå°‘ä¸ªæŒ‡é’ˆæ˜¯éšæœºçš„ã€‚å¯ä»¥çœ‹åˆ° node çš„å±‚çº§è¶Šå¤šï¼Œèƒ½è·³è¿‡çš„ node å°±æœ‰å¯èƒ½è¶Šå¤šï¼ŒæŸ¥æ‰¾é€Ÿåº¦æœ‰å¯èƒ½è¶Šå¿«ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½ä»»å‡­å±‚çº§æ— é™åˆ¶çš„å¢é•¿ï¼Œé€šå¸¸ä¸€ä¸ª skiplist ä¼šè®¾ç½®ä¸€ä¸ª "),a("code",[s._v("MAX_LEVEL")]),s._v(" æ¥é™åˆ¶æœ€å¤§çš„å±‚çº§ï¼ˆä»£ç ä¸­ç”¨ level è¡¨ç¤ºï¼‰ã€‚skiplist çš„æ—¶é—´å¤æ‚åº¦æ˜¯ "),a("code",[s._v("O(log n)")]),s._v("ï¼Œå’Œæ ‘çš„æ—¶é—´å¤æ‚åº¦ä¸€æ ·ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚")]),s._v(" "),a("h2",{attrs:{id:"ğŸ‘¨â€ğŸ’»-ä»£ç å®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‘¨â€ğŸ’»-ä»£ç å®ç°"}},[s._v("#")]),s._v(" ğŸ‘¨â€ğŸ’» ä»£ç å®ç°")]),s._v(" "),a("p",[s._v("ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“ skiplist çš„å½¢æ€å’ŒæŸ¥æ‰¾æ€è·¯ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å°è¯•å®ç°äº†ã€‚")]),s._v(" "),a("p",[s._v("é¦–å…ˆ Node çš„ç»“æ„ä½“ä¸Šé¢å·²ç»æåˆ°äº†ï¼Œä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª Level çš„ç»“æ„ä½“ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆåšåé¢ä¼šè§£é‡Šã€‚")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Element "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tScore  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("float64")]),s._v("\n\tMember "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Level "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Node "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Element\n    forwards   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Level "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ")]),s._v("\n    backward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  æœ€åº•å±‚çš„å‰ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("ä¸‹å›¾ç”¨æ¥å±•ç¤ºä¸‹ Node å„ä¸ªå±æ€§æ‰€è¡¨ç¤ºçš„å«ä¹‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220404222606.png",alt:""}})]),s._v(" "),a("p",[s._v("é™¤äº† Nodeï¼Œè¿˜éœ€è¦ä¸€ä¸ªç»“æ„ä½“æ¥è¡¨ç¤º skiplist")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" SkipList "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    tail   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node\n    header "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node\n    level  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æœ€é«˜ level å±‚æ•°ï¼Œä¸Šé¢å›¾ç¤ºä¸­ä¸º 4ï¼Œ(æœ€é«˜ä¸ºèŠ‚ç‚¹ 8ï¼Œæœ‰ 4 å±‚)")]),s._v("\n    length "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// skiplist é•¿åº¦")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ç°åœ¨ï¼ŒElementã€Node å’Œ SkipList ç»“æ„ä½“éƒ½æœ‰äº†ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å®ç° skiplist çš„å¢åˆ æ”¹æŸ¥ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰éœ€è¦å®ç° "),a("code",[s._v("MakeSkipList")]),s._v(" å’Œ "),a("code",[s._v("MakeNode")]),s._v(" ä¸¤ä¸ªå‡½æ•°ã€‚")]),s._v(" "),a("p",[s._v("åˆ›å»ºä¸€ä¸ª Node éœ€è¦ 3 ä¸ªå±æ€§ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("score")]),s._v(" "),a("li",[s._v("member")]),s._v(" "),a("li",[s._v("level")])]),s._v(" "),a("p",[s._v("å‰ä¸¤ä¸ªä¸º redis zset éœ€è¦çš„ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° level å¯ä»¥è®¾å®šå½“å‰ Node çš„å±‚æ•°ã€‚æœ‰äº†è¿™ 3 ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç° "),a("code",[s._v("MakeNode")])]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MakeNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("level "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("float64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" member "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    node "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        Element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            Score"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  score"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            Member"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" member"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Level"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" level"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("Level"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" node\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[a("code",[s._v("MakeSkipList")]),s._v(" ä¼šåˆ›å»ºä¸€ä¸ª skiplistï¼Œä¸ºäº†ä»£ç é€»è¾‘æ¯”è¾ƒæ¸…æ¥šï¼Œé€šå¸¸ä¼šä¸º skiplist åˆ›å»ºä¸€ä¸ª nodeï¼Œè¿™ä¸ª node ä¸ä¿å­˜ Elementï¼ŒæŠŠè¿™ä¸ªç©º Node å½“ä½œ skiplist çš„ headerã€‚")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" MAX_LEVEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//é™åˆ¶ skiplist æœ€é«˜å±‚çº§ä¸èƒ½è¶…è¿‡ 6 å±‚")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MakeSkipList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("SkipList "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("SkipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        tail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        header"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MakeNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MAX_LEVEL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç©ºå…ƒç´ èŠ‚ç‚¹ä½œä¸º headerï¼Œheader æ‹¥æœ‰æœ€é«˜å±‚çº§")]),s._v("\n        level"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†åˆ›å»º "),a("code",[s._v("MakeSkipList")]),s._v(" å’Œ "),a("code",[s._v("MakeNode")]),s._v(" æ–¹æ³•ï¼Œç°åœ¨åªè¦å†å®ç° skiplist çš„å¢åˆ æ”¹æ–¹æ³•å°±å¯ä»¥äº†ã€‚")]),s._v(" "),a("h3",{attrs:{id:"find"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#find"}},[s._v("#")]),s._v(" Find")]),s._v(" "),a("p",[s._v("è™½ç„¶ skiplist ä¸­ä¸ä¼šæœ‰ Find å‡½æ•°ï¼Œä½†æ˜¯å¢åˆ æ”¹éƒ½éœ€è¦å…ˆæŸ¥æ‰¾åˆ°èŠ‚ç‚¹ï¼Œæ‰€ä»¥åœ¨å®ç°å¢åˆ æ”¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£ skiplist å¦‚ä½•æŸ¥æ‰¾ã€‚")]),s._v(" "),a("p",[s._v("å‰é¢æåˆ° skiplist æ˜¯æœ‰åºé“¾è¡¨ï¼Œ"),a("strong",[s._v("è¿™é‡Œè¦æ³¨æ„ï¼Œè¿™é‡Œçš„é¡ºåºæ˜¯æŒ‰ç…§ score æ’åºçš„ï¼Œå¦‚æœ score ä¸€æ ·å†æ ¹æ® member æ’åºï¼Œç±»ä¼¼ sql ä¸­çš„ "),a("code",[s._v("order by score acs, member acs")]),s._v("ã€‚")])]),s._v(" "),a("p",[s._v("å‡è®¾æˆ‘ä»¬è¦æŸ¥æ‰¾ score=12 çš„ elementï¼Œå½“å‰èŠ‚ç‚¹ä¸º "),a("code",[s._v("currentNode")]),s._v("ï¼Œéå† "),a("code",[s._v("currentNode.levels")]),s._v("ï¼Œéå†ä¼šæœ‰ 3 ç§æƒ…å†µ(æ¯ä¸ªå›¾ç¤ºä¸­é»„è‰²çº¿æ¡ä¸ºæŸ¥æ‰¾ç¤ºä¾‹)ï¼š")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("ç¬¬ä¸€ç§ "),a("code",[s._v("currentNode.levels[i] == nil")]),s._v("ï¼Œè¿™ç§æƒ…å†µä¸‹è¯´æ˜è¯¥å±‚çº§æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å·²ç»åˆ°è¾¾ skiplist tail äº†ï¼Œç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€å±‚ levelã€‚\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424112707.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("ç¬¬äºŒç§æƒ…å†µ "),a("code",[s._v("currentNode.levels[i].Element.score > score")]),s._v("ï¼Œè¿™ç§æƒ…å†µè¯´æ˜è¿™ä¸ªå±‚çº§çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ score å·²ç»è¶…å‡ºäº†æˆ‘ä»¬ç»™å®šçš„ scoreã€‚ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€å±‚ levelã€‚\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424112735.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("ç¬¬ä¸‰ç§æƒ…å†µ "),a("code",[s._v("curretNode.levesl[i].Element.score <= score")]),s._v("ï¼Œè¿™ç§æƒ…å†µè¯´æ˜è¿™ä¸ªå±‚çº§çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ score å°äº(æˆ–ç­‰äº)æˆ‘ä»¬ç»™å®šçš„ scoreï¼Œè¿™ä¸ªæƒ…å†µä¸‹ï¼ŒcurrentNode å¯ä»¥ç›´æ¥è·³åˆ°è¯¥ nodeï¼š"),a("code",[s._v("currentNode = currentNode.levels[i]")]),s._v("ã€‚\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424112804.png",alt:""}})])])]),s._v(" "),a("h3",{attrs:{id:"remove"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remove"}},[s._v("#")]),s._v(" Remove")]),s._v(" "),a("p",[s._v("ç†æ¸…æ¥šæŸ¥æ‰¾çš„ 3 ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç° remove æ–¹æ³•äº† ğŸ‘")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("skipList "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("SkipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("float64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" member "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    currentNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" skipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("header\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" MAX_LEVEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¿™é‡Œçš„ for ä¸º true ç›¸å½“äºæƒ…å†µ 3ï¼Œä½†æ˜¯æ˜¯ç”¨ã€Œä¸æ˜¯ æƒ…å†µ 1ã€ && ã€Œä¸æ˜¯æƒ…å†µ 2 ã€æ¥è¡¨ç¤º")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" \n            currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v("\n             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Member "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" member"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tcurrentNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç°åœ¨ currentNode çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯è¦åˆ é™¤çš„èŠ‚ç‚¹")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("æ³¨æ„çœ‹ä»£ç ä¸­çš„æ³¨é‡Šï¼Œè¿™æ˜¯ç†è§£æŸ¥æ‰¾çš„å…³é”®ã€‚")]),s._v(" "),a("p",[s._v("æ‰§è¡Œå®Œ for çš„ä»£ç ä¹‹åï¼Œ"),a("code",[s._v("currentNode")]),s._v(" çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯è¦åˆ é™¤çš„èŠ‚ç‚¹ã€‚å‡è®¾æˆ‘ä»¬è¦åˆ é™¤ 19ï¼Œé‚£ä¹ˆ currentNode ç°åœ¨æŒ‡å‘ 12 èŠ‚ç‚¹ï¼Œç°åœ¨æˆ‘ä»¬è¦è€ƒè™‘åˆ é™¤ 19 ä¹‹åè¦æ›´æ–°å“ªäº›æ•°æ®ï¼Ÿ")]),s._v(" "),a("ol",[a("li",[s._v("èŠ‚ç‚¹ 23 çš„ backward æŒ‡é’ˆ")]),s._v(" "),a("li",[s._v("æŒ‡å‘ 19 çš„ fowards æŒ‡é’ˆï¼Œåœ¨è¿™é‡Œåº”è¯¥æ˜¯"),a("code",[s._v("èŠ‚ç‚¹ 8 çš„ levels[1].forward")]),s._v("å’Œ"),a("code",[s._v("èŠ‚ç‚¹ 12 çš„ levels[0].forward")]),s._v("ã€‚")])]),s._v(" "),a("p",[s._v("ä¸Šé¢çš„æƒ…å†µ 2 æ˜¯é’ˆå¯¹åˆ é™¤èŠ‚ç‚¹ 19 çš„æƒ…å†µï¼Œä½†æ˜¯å®é™…ä¼šæœ‰å…¶ä»–çš„æƒ…å†µï¼Œæ¯”å¦‚è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯ 23ï¼Œé‚£ä¹ˆè¦æ›´æ–°çš„ forwards æŒ‡é’ˆå°±ä¸ä¸€æ ·äº†ï¼Œæ‰€ä»¥æƒ…å†µ 2 éœ€è¦æœ‰ä¸€ä¸ªæ›´åŠ é€šç”¨çš„æè¿°ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œå‡è®¾è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯ delNodeï¼ŒdelNode çš„å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ currentNodeï¼Œé‚£ä¹ˆæ›´æ–° forwards æŒ‡é’ˆåº”è¯¥æ˜¯")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("å¦‚æœ "),a("code",[s._v("len(delNode.levels) <= len(currentNode.levels)")]),s._v("ï¼Œé‚£ä¹ˆåªè¦æ›´æ–° currentNode ä¸­ "),a("code",[s._v("levels[0:len(delNode.levels) - 1]")]),s._v(" çš„ forward æŒ‡é’ˆã€‚ï¼ˆå¦‚ä¸‹å›¾é»„è‰²çº¿æ¡éƒ¨åˆ†\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220408115042.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("å¦‚æœ "),a("code",[s._v("len(delNode.levels) > len(currentNode.levels)")]),s._v("ï¼Œé‚£ä¹ˆè¦æ›´æ–°çš„ forwards åˆ†æˆäº†ä¸¤ä¸ªéƒ¨åˆ†")]),s._v(" "),a("ol",[a("li",[s._v("currentNode ä¸­ "),a("code",[s._v("levels[0:len(currentNode.levels) - 1]")]),s._v(" "),a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424112848.png",alt:""}})]),s._v(" "),a("li",[s._v("å…¶ä»–èŠ‚ç‚¹çš„ "),a("code",[s._v("levels[len(currentNode.levels):len(delNode.levels) - 1]")]),s._v(" "),a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424112932.png",alt:""}})])])])]),s._v(" "),a("p",[s._v("ä¸Šé¢çš„æƒ…å†µï¼Œã€Œ1ã€å’Œã€Œ2.1ã€æ¯”è¾ƒå¥½å¤„ç†ï¼Œä½†æ˜¯ã€Œ2.2ã€çš„æƒ…å†µæ¯”è¾ƒéº»çƒ¦ä¸€äº›ï¼Œå› ä¸º 2.2 æƒ…å†µè¦æ›´æ–° forward æŒ‡é’ˆçš„å¯ä»¥æ˜¯ä»»æ„èŠ‚ç‚¹ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†å¤„ç† 2.2 çš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­éœ€è¦ä¸€ä¸ª slice æ¥ä¿å­˜ã€Œåœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ level ä¸‹é™çš„ nodeã€ã€‚è¿™å¥è¯å¯èƒ½ä¸å¥½ç†è§£ï¼Œè¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼šåœ¨æŸ¥æ‰¾ 19 è¿‡ç¨‹ä¸­ï¼ŒcurrentNode ä¸º 3ã€8 èŠ‚ç‚¹æ—¶ï¼Œä¼šä¸‹é™å±‚çº§æŸ¥æ‰¾ã€‚")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("skipList "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("SkipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("float64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" member "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    updateNodes "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MAX_LEVEL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//1")]),s._v("\n    currentNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" skipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("header\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" MAX_LEVEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¿™é‡Œçš„ for ä¸º true ç›¸å½“äºæƒ…å†µ 3ï¼Œä½†æ˜¯æ˜¯ç”¨ã€Œä¸æ˜¯ æƒ…å†µ 1ã€ && ã€Œä¸æ˜¯æƒ…å†µ 2 ã€æ¥è¡¨ç¤º")]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" MAX_LEVEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Member "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" member"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\tcurrentNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\tupdateNodes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" currentNode  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç°åœ¨ currentNode çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯è¦åˆ é™¤çš„èŠ‚ç‚¹ ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424122838.png",alt:""}})]),s._v(" "),a("p",[s._v("è¿™é‡Œè¦æ³¨æ„ "),a("code",[s._v("updateNodes")]),s._v(" ä¸­ä¿å­˜äº†ä¸¤æ¬¡ 8 èŠ‚ç‚¹ã€‚")]),s._v(" "),a("p",[s._v("ç°åœ¨æœ‰äº† updateNodes ä¸­ä¿å­˜çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ–° forward æŒ‡é’ˆäº†ï¼Œæ›´æ–° forward æŒ‡é’ˆçš„ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("removeNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// remove æƒ…å†µ 1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("removeNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" removeNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// remove æƒ…å†µ 2.1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" removeNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// remove æƒ…å†µ 2.2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("removeNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        updateNodes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" removeNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("remove çš„é€»è¾‘å·®ä¸å¤šå·²ç»å®Œæˆäº†ï¼Œä¸»è¦çš„éš¾ç‚¹æœ‰ 2 ä¸ªï¼š")]),s._v(" "),a("ol",[a("li",[s._v("å¦‚ä½•æ‰¾åˆ°è¢«åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®")]),s._v(" "),a("li",[s._v("åˆ é™¤ä¹‹åæ›´æ–° forward æŒ‡é’ˆ")])]),s._v(" "),a("h3",{attrs:{id:"insert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#insert"}},[s._v("#")]),s._v(" insert")]),s._v(" "),a("p",[s._v("insert çš„é€»è¾‘å’Œ remove å·®ä¸å¤šï¼š")]),s._v(" "),a("ol",[a("li",[s._v("æ‰¾åˆ°è¦æ’å…¥èŠ‚ç‚¹çš„ä½ç½®")]),s._v(" "),a("li",[s._v("æ’å…¥ä¹‹åæ›´æ–° forward æŒ‡é’ˆ")])]),s._v(" "),a("p",[s._v("æ•´ä¸ªä»£ç æ€è·¯å’Œ remove å·®ä¸å¤šï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œæœ‰äº›ç»†èŠ‚é—®é¢˜å¯ä»¥å‚è€ƒ GitHub çš„æºç ã€‚")]),s._v(" "),a("h3",{attrs:{id:"redis-ä¸­çš„-skiplist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis-ä¸­çš„-skiplist"}},[s._v("#")]),s._v(" redis ä¸­çš„ skiplist")]),s._v(" "),a("p",[s._v("æœ€å¼€å§‹æåˆ° redis ä¸­çš„ zset ç»“æ„æ˜¯åŸºäº skiplist å®ç°çš„ï¼Œä¸è¿‡ç”±äº zset æ”¯æŒ zrank æ“ä½œï¼Œæ‰€ä»¥ redis å¯¹äº skiplist åšäº†ä¸€ç‚¹æ”¹è¿›ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424112630.png",alt:""}})]),s._v(" "),a("p",[s._v("zrank å¯ä»¥è¿”å› score çš„æ’åï¼Œæ¯”å¦‚èŠ‚ç‚¹ 3 çš„æ’åæ˜¯ 0ï¼ŒèŠ‚ç‚¹ 36 çš„æ’åæ˜¯ 6ã€‚å¦‚æœè¦è·å–ä¸€ä¸ª member çš„æ’åï¼Œåœ¨ç°åœ¨çš„ skiplist ä¸­ï¼Œæˆ‘ä»¬éœ€è¦éå† skiplist æœ€åº•å±‚çš„åŒå‘é“¾è¡¨æ‰èƒ½è·å–åˆ°ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å°±é€€åŒ–æˆ "),a("code",[s._v("O(n)")]),s._v(" äº†ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº† zrank çš„æ•ˆç‡ï¼Œredis å¯¹ skiplist åšäº†ä¸€ç‚¹ä¼˜åŒ–ï¼šåœ¨ Level å¢åŠ  span å±æ€§ï¼Œä»£è¡¨"),a("strong",[s._v("å½“å‰æŒ‡é’ˆè·¨è¶Šäº†å¤šå°‘ä¸ªèŠ‚ç‚¹")]),s._v("ã€‚")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Level "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Node "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n    span    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è·³è¿‡å¤šå°‘ä¸ªå…ƒç´ ï¼Œå¦‚æœä¸¤ä¸ªå…ƒç´ ç›¸é‚»ï¼Œé‚£ä¹ˆ span ä¸º 0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("ä¸‹å›¾å±•ç¤ºäº†èŠ‚ç‚¹ 8 æ¯ä¸ª level.span çš„å€¼\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220424151708.png",alt:""}})]),s._v(" "),a("p",[s._v("å¼•å…¥ span ä¹‹åï¼Œrank å°±ä¸å¿…éå†é“¾è¡¨äº†ï¼šåªè¦åœ¨æ¯æ¬¡è·³è·ƒè¿‡ç¨‹ä¸­ï¼Œç´¯è®¡ span çš„å€¼ï¼Œå°±å¯ä»¥ä»¥ "),a("code",[s._v("log(n)")]),s._v(" çš„æ—¶é—´å¤æ‚åº¦è·å–åˆ° rank å€¼äº†ã€‚")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("skipList "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("SkipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("GetRank")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("member "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("float64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    span "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("int64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    currentNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" skipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("header\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" MAX_LEVEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Member "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" member"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            span "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("span "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n            currentNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Member "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" member "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            span "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" currentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("levels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("span\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" span\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" span\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("å¼•å…¥ span ä¹‹åï¼Œå¯¹äº insert å’Œ remove æ“ä½œï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿéœ€è¦æ›´æ–° span çš„å€¼ï¼Œå¹¸è¿çš„æ˜¯æ›´æ–° span å’Œæ›´æ–° forward çš„é€»è¾‘ä¸€æ ·ï¼Œè¿™é‡ŒåŒæ ·ä¸èµ˜è¿°ï¼Œå»ºè®®æŸ¥çœ‹ GitHub ä¸Šæºç äº†è§£æ›´å¤šã€‚")]),s._v(" "),a("h3",{attrs:{id:"è°ƒè¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒè¯•"}},[s._v("#")]),s._v(" è°ƒè¯•")]),s._v(" "),a("p",[s._v("ä½œä¸ºä¸€ä¸ªç®—æ³•èœé¸¡ï¼Œå®ç° skiplist è¿‡ç¨‹å¾ˆç—›è‹¦ï¼Œä¸»è¦åŸå› åœ¨äºè¿è¡Œè¿‡ç¨‹ä¸­æ— æ³•ã€Œçœ‹åˆ°ã€skiplit çš„ç»“æ„ï¼Œæ•´ä¸ªè°ƒè¯•è¿‡ç¨‹ä¸­å¾ˆæŠ“çï¼Œç´¢æ€§å®ç°äº†ä¸€ä¸ª print å‡½æ•°ï¼Œå¯ä»¥å°† skiplist å‹å¥½çš„æ‰“å°å‡ºæ¥ï¼Œå…·ä½“ä»£ç åœ¨"),a("a",{attrs:{href:"https://github.com/chenjiayao/sidergo/blob/master/lib/sortedset/skip_list.go",target:"_blank",rel:"noopener noreferrer"}},[s._v("è¿™é‡Œ"),a("OutboundLink")],1),s._v("ï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°ä½ ã€‚")]),s._v(" "),a("p",[s._v("è¾“å‡ºçš„æ•ˆæœå¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("+---------+---------+---------+----------+----------+----------+----------+\n| 0.0 : 5 | nil     | nil     | nil      | nil      | nil      | 36.0 : 0 |\n| 0.0 : 5 | nil     | nil     | nil      | nil      | nil      | 36.0 : 0 |\n| 0.0 : 1 | nil     | 8.0 : 2 | nil      | nil      | 23.0 : 0 | 36.0 : 0 |\n| 0.0 : 1 | nil     | 8.0 : 1 | nil      | 19.0 : 0 | 23.0 : 0 | 36.0 : 0 |\n| 0.0 : 0 | 3.0 : 0 | 8.0 : 0 | 12.0 : 0 | 19.0 : 0 | 23.0 : 0 | 36.0 : 0 |\n| 0.0 : 0 | 3.0 : 0 | 8.0 : 0 | 12.0 : 0 | 19.0 : 0 | 23.0 : 0 | 36.0 : 0 |\n+---------+---------+---------+----------+----------+----------+----------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("ç®€å•è§£é‡Šä¸‹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("cell ä¸­ä»¥ "),a("code",[s._v(":")]),s._v(" åŒºéš” score å’Œ span ä¸¤ä¸ªå€¼ ï¼Œæ‰€ä»¥æ¯åˆ— "),a("code",[s._v(":")]),s._v(" å‰é¢çš„å€¼éƒ½æ˜¯ä¸€æ ·çš„")]),s._v(" "),a("li",[s._v("ç¬¬ä¸€åˆ—ä¸º headerï¼Œä¸ä»£è¡¨èŠ‚ç‚¹")]),s._v(" "),a("li",[s._v("nil è¡¨ç¤ºä¸å­˜åœ¨è¯¥ level")])]),s._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[s._v("#")]),s._v(" æ€»ç»“")]),s._v(" "),a("p",[s._v("å›é¡¾ä¸€ä¸‹ï¼Œæœ¬ç« çš„å‡ ä¸ªé‡ç‚¹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("skiplist çš„å®ç°")]),s._v(" "),a("li",[s._v("redis ä¸ºäº†å®ç° rank å¯¹ skiplist åšçš„æ”¹è¿›")])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("a",{attrs:{rel:"license",href:"http://creativecommons.org/licenses/by-nc-nd/4.0/"}},[a("img",{staticStyle:{"border-width":"0"},attrs:{alt:"çŸ¥è¯†å…±äº«è®¸å¯åè®®",src:"https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png"}})]),a("br"),s._v("æœ¬ä½œå“é‡‡ç”¨"),a("a",{attrs:{rel:"license",href:"http://creativecommons.org/licenses/by-nc-nd/4.0/"}},[s._v("çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…è®¸å¯åè®®")]),s._v("è¿›è¡Œè®¸å¯ã€‚")]),s._v(" "),a("Vssue")],1)}),[],!1,null,null,null);t.default=e.exports}}]);